<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Create Virtual Machine - Docker Automation with Dockerfiles (Linux)</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <meta name="description" content="Azure Workshops" />
    <meta name="author" content="Joshua Davis">
    <link rel="icon" href="" type="image/x-icon">
    
    <!-- Font -->
    
    <!-- CSS -->
    <link href='../../themes/azure/css/vs.css' rel='stylesheet' type='text/css'><link href='../../themes/azure/css/theme.css' rel='stylesheet' type='text/css'><link href='../../themes/azure/css/theme-white.min.css' rel='stylesheet' type='text/css'>
</head>
<body class="">

        <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-2 col-md-offset-1">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="/">Azure Workshops</a>
                    </div>
                </div>

                <div class="col-md-8">
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <ul class="nav navbar-nav navbar-right">
                            <!--
                            <li><a href="about.html">About</a></li>
                            <li><a href="contact.html">Contact</a></li>
                            -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

<div id="content-wrapper" class="container-fluid">
    <div class="row hidden-print">
        <div class="col-md-10 col-md-offset-1 breadcrumbs">
            <a href="../../index.html">Docker Automation with Dockerfiles (Linux)</a> / <a href="../../Courseware/Introduction.html">Courseware</a> / <a href="../../Courseware/Ubuntu/Create_Virtual_Machine.html">Ubuntu</a> / <a href="../../Courseware/Ubuntu/Create_Virtual_Machine.html">Create Virtual Machine</a>        </div>
    </div>
    <div class="row">
        <div class="col-md-2 col-md-offset-1 hidden-print">
            <div data-spy="affix" data-offset-top="100">
                <!-- Navigation -->
                <ul class='Nav'><li class='Nav__item '><a href="../../Overview.html">Overview</a></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Getting Started</a><ul class='Nav'><li class='Nav__item '><a href="../../Getting_Started/Requirements.html">Requirements</a></li><li class='Nav__item '><a href="../../Getting_Started/Azure_Registration.html">Azure Registration</a></li></ul></li><li class='Nav__item Nav__item--open has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Courseware</a><ul class='Nav'><li class='Nav__item '><a href="../../Courseware/Introduction.html">Introduction</a></li><li class='Nav__item Nav__item--open has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Ubuntu</a><ul class='Nav'><li class='Nav__item Nav__item--active'><a href="../../Courseware/Ubuntu/Create_Virtual_Machine.html">Create Virtual Machine</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Install_Updates.html">Install Updates</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Install_Docker.html">Install Docker</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Install_Node.js.html">Install Node.js</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Download_Sample_Website.html">Download Sample Website</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Download_Dependencies.html">Download Dependencies</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Construct_Dockerfile.html">Construct Dockerfile</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Build_Image.html">Build Image</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Deploy_Container.html">Deploy Container</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Expose_Site_in_Azure.html">Expose Site in Azure</a></li></ul></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>CentOS</a><ul class='Nav'><li class='Nav__item '><a href="../../Courseware/CentOS/Create_Virtual_Machine.html">Create Virtual Machine</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Install_Updates.html">Install Updates</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Install_Docker.html">Install Docker</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Install_Node.js.html">Install Node.js</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Download_Sample_Website.html">Download Sample Website</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Download_Dependencies.html">Download Dependencies</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Construct_Dockerfile.html">Construct Dockerfile</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Build_Image.html">Build Image</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Deploy_Container.html">Deploy Container</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Expose_Site_in_Azure.html">Expose Site in Azure</a></li></ul></li></ul></li></ul>
                <div class="Links">
                    
                    <div class="pdf-link">
                        <hr />
                        <a href="../../pdf/Docker Automation with Dockerfiles (Linux).pdf"><i class="fa fa-file-pdf-o" aria-hidden="true"></i> <span>Download PDF</span></a>
                    </div>

                                            <hr/>
                        <div class="Twitter">
                                                            <iframe allowtransparency="true" frameborder="0" scrolling="no" style="width:162px; height:20px;" src="https://platform.twitter.com/widgets/follow_button.html?screen_name=azureworkshops&amp;show_count=false"></iframe>
                                <br />
                                <br />
                                                    </div>
                                    </div>
            </div>
        </div>
        <div class="col-md-6">
            <article class="Page">
    <div class="pageHeader">
        <h1>Create Virtual Machine</h1>
                    <div class="date"> Friday, August 4, 2017 4:52 PM</div>
            </div>
    <div class="copy">
        <h2 id="page_Objective">Objective</h2>
<p>All of our work in this workshop, with the exception of the small Azure configuration at the end, will be performed on a single virtual machine. Let's get started creating that VM.</p>
<h2 id="page_Create-a-Resource-Group">Create a Resource Group</h2>
<p>In order to create resources, we need a <em>Resource Group</em> to place them in.</p>
<ol>
<li>
<p>If you are not there already, go ahead and click on the <strong>Resource Groups</strong> <img src="https://raw.githubusercontent.com/AzureWorkshops/images/master/icons_resource_groups.jpg" class="inline"/> in the Azure Portal to open the Resource Groups blade.</p>
</li>
<li>
<p>At the top of the Resource Groups blade, click on <strong>Add</strong> <img src="https://raw.githubusercontent.com/AzureWorkshops/images/master/icons_add.jpg" class="inline"/>. This will open a panel that asks for some basic configuration settings.</p>
</li>
<li>
<p>Complete the configuration settings with the following:</p>
<ul>
<li>Resource group name: <strong>azworkshops_dockerfile_ubuntu_demo</strong>
</li>
<li>Subscription: <strong><em>&lt;choose your subscription&gt;</em></strong>
</li>
<li>Resource group location: <strong><em>&lt;choose your location&gt;</em></strong>
</li>
</ul>
</li>
<li>
<p><em>&lt;Optional&gt;</em> Check <em>Pin to dashboard</em> at the bottom of the panel.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
<li>
<p>It should only take a second for the resource group to be created.  Once you click create, the configuration panel closes and returns you to the list of available resource groups.  Your recently created group may not be visible in the list.  Clicking on <strong>Refresh</strong> <img src="https://raw.githubusercontent.com/AzureWorkshops/images/master/icons_refresh.jpg" class="inline"/> at the top of the Resource Groups blade should display your new resource group.</p>
</li>
</ol>
<p><strong>NOTE:</strong> When you create a resource group, you are prompted to choose a location. Additionally, as you create individual resources, you will also be prompted to choose locations. The location of resource groups and their resources can be different.  This is because resource groups store <em>metadata</em> describing their contained resources; and, due to some types of compliance that your company may adhere to, you may need to store that metadata in a different location than the resources themselves.  For example, if you are a US-based company, you may choose to keep the metadata state-side while creating resources in foreign regions to reduce latency for the end-user.</p>
<h2 id="page_Create-a-Virtual-Machine">Create a Virtual Machine</h2>
<p>Now that we have an available resource group, let's create the actual Ubuntu server.</p>
<ol>
<li>
<p>If you are not there already, go ahead and navigate to the <strong>azworkshops_dockerfile_ubuntu_demo</strong> resource group.</p>
</li>
<li>
<p>At the top of the blade for our group, click on <strong>Add</strong> <img src="https://raw.githubusercontent.com/AzureWorkshops/images/master/icons_add.jpg" class="inline"/>. This will display the blade for the <em>Azure Marketplace</em> allowing you to deploy a number of different solutions.</p>
</li>
<li>
<p>We are interested in deploying an Ubuntu server. Therefore, in the <em>Search Everything</em> box, type in <strong>Ubuntu Server</strong>.  This will display a couple of different versions.  Since we want to deploy the latest <em>stable</em> version of Ubuntu, from the displayed options, choose <strong>Ubuntu Server 16.04 LTS</strong>.</p>
</li>
</ol>
  <img src="../../images/ubuntu_server.jpg" class="block"/>
<ol start="4">
<li>
<p>This will display a blade providing more information about the server we have chosen. To continue creating the server, choose <strong>Create</strong>.</p>
</li>
<li>
<p>We are now prompted with some configuration options.  There are 3 sections we need to complete and the last section is a summary of our chosen options.</p>
<ol>
<li>
<p>Basics</p>
<ul>
<li>Name: <strong>dockerfile-ubuntu</strong>
</li>
<li>VM disk type: <strong>SSD</strong>
</li>
<li>Username: <strong>localadmin</strong>
</li>
<li>Authentication type: <strong>Password</strong><br />
(NOTE: You can choose SSH if you are familiar with how to set this up.  If you are not, we will do this in a later workshop.  However, for this workshop, <em>Password</em> authentication is sufficient.)</li>
<li>Password: <strong>Pass@word1234</strong>
</li>
<li>Confirm password: <em>&lt;same as above&gt;</em>
</li>
<li>Subscription: <em>&lt;choose your subscription&gt;</em>
</li>
<li>Resource group: <strong>Use existing</strong> - <strong>azworkshops_dockerfile_ubuntu_demo</strong>
</li>
<li>Location: <em>&lt;choose a location&gt;</em>
</li>
</ul>
</li>
<li>
<p>Size</p>
<ul>
<li>
<strong>DS1_V2</strong>
</li>
</ul>
</li>
<li>
<p>Settings</p>
<ul>
<li>
<p>Use managed disks: <strong>No</strong></p>
</li>
<li>
<p>Storage account: (click on it &amp; <strong>Create New</strong>)</p>
<ul>
<li>Name: <strong>dfubuntudata</strong><em>&lt;random number&gt;</em>  (ex.  <em>dfubuntudata123456</em>)<br />
(NOTE: This name must be <em>globally</em> unique, so it cannot already be used.)</li>
<li>Performance: <strong>Premium</strong>
</li>
<li>Replication: <strong>Locally-redundant storage (LRS)</strong>
</li>
</ul>
</li>
<li>
<p>Virtual network: <em>&lt;accept default&gt;</em> (e.g. <em>(new) azworkshops_dockerfile_ubuntu_demo-vnet</em>)</p>
</li>
<li>
<p>Subnet: <em>&lt;accept default&gt;</em> (e.g. <em>default (172.16.1.0/24)</em>)</p>
</li>
<li>
<p>Public IP address: <em>&lt;accept default&gt;</em> (e.g. <em>(new) dockerfile-ubuntu-ip</em>)</p>
</li>
<li>
<p>Network security group (firewall): <em>&lt;accept default&gt;</em> (e.g. <em>(new) dockerfile-ubuntu-nsg</em>)</p>
</li>
<li>
<p>Extensions: <strong>No extensions</strong></p>
</li>
<li>
<p>Availability set: <strong>None</strong></p>
</li>
<li>
<p>Boot diagnostics: <strong>Enabled</strong></p>
</li>
<li>
<p>Guest OS diagnostics: <strong>Disabled</strong></p>
</li>
<li>
<p>Diagnostics storage account: (click on it &amp; <strong>Create New</strong>)</p>
<ul>
<li>Name: <strong>dfubuntudiags</strong><em>&lt;random number&gt;</em>  (ex.  <em>dfubuntudiags123456</em>)</li>
<li>Performance: <strong>Standard</strong>
</li>
<li>Replication: <strong>Locally-redundant storage (LRS)</strong>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Summary (just click <strong>OK</strong> to continue)</p>
</li>
</ol>
</li>
</ol>
<p>This machine is relatively small, but with containers, it can still deliver some pretty impressive performance.  Once scheduled, it may take a minute or two for the machine to be created by Azure.  Once it has been created, Azure <em>should</em> open the machine's status blade automatically.</p>
<h2 id="page_Connect-to-the-Virtual-Machine">Connect to the Virtual Machine</h2>
<p>Once your machine has been created, we can remotely connect to it using secure shell (SSH).  These instructions assume that you do not have strong familiarity with SSH and/or that you have no built-in SSH client in your local OS.  For this reason, we will be using the PuTTY client we downloaded earlier for the workshop.  However, if you are more comfortable using another Telnet/SSH client (e.g. MacOS, Linux, Windows Sub-Layer (WSL)), please feel free to use it.</p>
<h4 id="page_Get-Public-IP">Get Public IP</h4>
<ol>
<li>
<p>If it is not already open, navigate to the <strong>Overview</strong> blade of your newly created virtual machine.</p>
</li>
<li>
<p>In the top section of the blade, in the right column, you should see a <strong>Public IP address</strong> listed. <img src="../../images/ubuntu_ip_address.jpg" class="block"/></p>
</li>
<li>
<p>Copy the IP address.</p>
</li>
</ol>
<h4 id="page_Connect-with-SSH">Connect with SSH</h4>
<ol>
<li>
<p>Open <strong>PuTTY</strong>.</p>
</li>
<li>
<p>In the configuration window:</p>
<ul>
<li>Hostname: <strong><em>&lt;IP address from previous step&gt;</em></strong>
</li>
<li>Port: <strong>22</strong>
</li>
<li>Connection type: <strong>SSH</strong>
</li>
</ul>
</li>
</ol>
<img src="../../images/ubuntu_putty_configuration.jpg" class="block"/>
<ol start="3">
<li>
<p>Click <strong>Open</strong></p>
</li>
<li>
<p>In the security prompt, click <strong>Yes</strong>.</p>
</li>
</ol>
  <img src="../../images/putty_security.jpg" class="block"/>
<ol start="5">
<li>
<p>You will then connect to the remote Ubuntu server.</p>
</li>
<li>
<p>Enter the username and password from above (e.g. <strong>localadmin</strong> and <strong>Pass@word1234</strong>, respectively).</p>
</li>
<li>
<p>You should then see the <code>bash</code> prompt:</p>
</li>
</ol>
<pre><code class="language-bash">localadmin@dockerfile-ubuntu:~$
</code></pre>
<p>Congratulations.  You have successfully created and connected to your remote Ubuntu server in Azure.  You are now ready to install the Docker runtime.</p>
    </div>

            <nav class="hidden-print">
            <ul class="pager">
                                    <li class=pager-prev><a href="../../Courseware/Introduction.html">Previous</a></li>
                                                    <li class=pager-next><a href="../../Courseware/Ubuntu/Install_Updates.html">Next</a></li>            </ul>
        </nav>
    </article>
        </div>
        <div class="col-md-2 hidden-print">
            <div class="article-links" data-spy="affix" data-offset-top="100">
                <strong>In this article</strong><ol><li><a href="#page_Objective">Objective</a></li><li><a href="#page_Create-a-Resource-Group">Create a Resource Group</a></li><li><a href="#page_Create-a-Virtual-Machine">Create a Virtual Machine</a></li><li><a href="#page_Connect-to-the-Virtual-Machine">Connect to the Virtual Machine</a></li></ol>
            </div>
        </div>
    </div>
</div>

    <div id="footer" class="container-fluid hidden-print">
        <div class="row">
            <div class="col-md-2 col-md-offset-1">
            
            </div>
            <div class="col-md-8" style="text-align:right;">
            This work is licensed under a Creative Commons Attribution 4.0 International License.
            </div>
        </div>
    </div>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- JS -->
    
    <script src="../../themes/azure/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script src="../../themes/azure/js/theme.js"></script>

</body>
</html>

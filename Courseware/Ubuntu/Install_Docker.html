<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Install Docker - Docker Automation with Dockerfiles (Linux)</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <meta name="description" content="Azure Workshops" />
    <meta name="author" content="Joshua Davis">
    <link rel="icon" href="" type="image/x-icon">
    
    <!-- Font -->
    
    <!-- CSS -->
    <link href='../../themes/azure/css/vs.css' rel='stylesheet' type='text/css'><link href='../../themes/azure/css/theme.css' rel='stylesheet' type='text/css'><link href='../../themes/azure/css/theme-white.min.css' rel='stylesheet' type='text/css'>
</head>
<body class="">

        <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-2 col-md-offset-1">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="/">Azure Workshops</a>
                    </div>
                </div>

                <div class="col-md-8">
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <ul class="nav navbar-nav navbar-right">
                            <!--
                            <li><a href="about.html">About</a></li>
                            <li><a href="contact.html">Contact</a></li>
                            -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

<div id="content-wrapper" class="container-fluid">
    <div class="row hidden-print">
        <div class="col-md-10 col-md-offset-1 breadcrumbs">
            <a href="../../index.html">Docker Automation with Dockerfiles (Linux)</a> / <a href="../../Courseware/Introduction.html">Courseware</a> / <a href="../../Courseware/Ubuntu/Create_Virtual_Machine.html">Ubuntu</a> / <a href="../../Courseware/Ubuntu/Install_Docker.html">Install Docker</a>        </div>
    </div>
    <div class="row">
        <div class="col-md-2 col-md-offset-1 hidden-print">
            <div data-spy="affix" data-offset-top="100">
                <!-- Navigation -->
                <ul class='Nav'><li class='Nav__item '><a href="../../Overview.html">Overview</a></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Getting Started</a><ul class='Nav'><li class='Nav__item '><a href="../../Getting_Started/Requirements.html">Requirements</a></li><li class='Nav__item '><a href="../../Getting_Started/Azure_Registration.html">Azure Registration</a></li></ul></li><li class='Nav__item Nav__item--open has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Courseware</a><ul class='Nav'><li class='Nav__item '><a href="../../Courseware/Introduction.html">Introduction</a></li><li class='Nav__item Nav__item--open has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Ubuntu</a><ul class='Nav'><li class='Nav__item '><a href="../../Courseware/Ubuntu/Create_Virtual_Machine.html">Create Virtual Machine</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Install_Updates.html">Install Updates</a></li><li class='Nav__item Nav__item--active'><a href="../../Courseware/Ubuntu/Install_Docker.html">Install Docker</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Install_Node.js.html">Install Node.js</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Download_Sample_Website.html">Download Sample Website</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Download_Dependencies.html">Download Dependencies</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Construct_Dockerfile.html">Construct Dockerfile</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Build_Image.html">Build Image</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Deploy_Container.html">Deploy Container</a></li><li class='Nav__item '><a href="../../Courseware/Ubuntu/Expose_Site_in_Azure.html">Expose Site in Azure</a></li></ul></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>CentOS</a><ul class='Nav'><li class='Nav__item '><a href="../../Courseware/CentOS/Create_Virtual_Machine.html">Create Virtual Machine</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Install_Updates.html">Install Updates</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Install_Docker.html">Install Docker</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Install_Node.js.html">Install Node.js</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Download_Sample_Website.html">Download Sample Website</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Download_Dependencies.html">Download Dependencies</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Construct_Dockerfile.html">Construct Dockerfile</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Build_Image.html">Build Image</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Deploy_Container.html">Deploy Container</a></li><li class='Nav__item '><a href="../../Courseware/CentOS/Expose_Site_in_Azure.html">Expose Site in Azure</a></li></ul></li></ul></li></ul>
                <div class="Links">
                    
                    <div class="pdf-link">
                        <hr />
                        <a href="../../pdf/Docker Automation with Dockerfiles (Linux).pdf"><i class="fa fa-file-pdf-o" aria-hidden="true"></i> <span>Download PDF</span></a>
                    </div>

                                            <hr/>
                        <div class="Twitter">
                                                            <iframe allowtransparency="true" frameborder="0" scrolling="no" style="width:162px; height:20px;" src="https://platform.twitter.com/widgets/follow_button.html?screen_name=azureworkshops&amp;show_count=false"></iframe>
                                <br />
                                <br />
                                                    </div>
                                    </div>
            </div>
        </div>
        <div class="col-md-6">
            <article class="Page">
    <div class="pageHeader">
        <h1>Install Docker</h1>
                    <div class="date"> Friday, August 4, 2017 4:52 PM</div>
            </div>
    <div class="copy">
        <h2 id="page_Overview">Overview</h2>
<p>In this step, we are going to install Docker. This is one of the steps that will actually <em>not</em> be performed inside of the container image.  But, of course, we need Docker on the host in order to run containers.</p>
<h2 id="page_Install-Docker">Install Docker</h2>
<p>We now have an updated Ubuntu operating system.  We are ready to install Docker.</p>
<ol>
<li>We need to add the GPG key for the official Docker repository to the system because in the next step we want to download the Docker 'installer' directly from Docker and not the default Ubuntu servers to ensure we get the latest version of the engine.  From the command prompt, type the following:</li>
</ol>
<pre><code class="language-bash">sudo apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D
</code></pre>
<div class="bs-callout bs-callout-primary"><h4>Copy &amp; Paste</h4>You can paste this into PuTTY by <em>right-clicking</em> the terminal screen.</div>

<ol start="2">
<li>Now, we need to tell Ubuntu <em>where</em> the Docker repository is located. From the command prompt, type (or paste) the following:</li>
</ol>
<pre><code class="language-bash">sudo apt-add-repository 'deb https://apt.dockerproject.org/repo ubuntu-xenial main'
</code></pre>
<ol start="3">
<li>Once again, update the package database with the Docker packages from the newly added repository:</li>
</ol>
<pre><code class="language-bash">sudo apt-get update
</code></pre>
<ol start="4">
<li>Make sure you are about to install from the Docker repository instead of the default Ubuntu repository:</li>
</ol>
<pre><code class="language-bash">apt-cache policy docker-engine
</code></pre>
<ol start="5">
<li>You should see output <em>similar</em> to the following (notice that <code>docker-engine</code> is not installed and the <code>docker-engine</code> version number might be different):</li>
</ol>
<pre><code class="language-bash">docker-engine:
Installed: (none)
Candidate: 1.11.1-0~xenial
Version table:
   1.11.1-0~xenial 500
      500 https://apt.dockerproject.org/repo ubuntu-xenial/main amd64 Packages
   1.11.0-0~xenial 500
      500 https://apt.dockerproject.org/repo ubuntu-xenial/main amd64 Packages
</code></pre>
<ol start="6">
<li>Finally, install Docker:</li>
</ol>
<pre><code class="language-bash">sudo apt-get install -y docker-engine
</code></pre>
<ol start="7">
<li>Installing the Docker engine may take an additional minute or two.</li>
</ol>
<h2 id="page_Additional-Configuration">Additional Configuration</h2>
<p>To simplify running and managing Docker, there's some additional configuration that we need to implement.  While this section is optional, it is recommended to make managing Docker much easier.</p>
<h4 id="page_Ensure-Docker-Engine-is-Running">Ensure Docker Engine is Running</h4>
<ol>
<li>From the command prompt, type:</li>
</ol>
<pre><code class="language-bash">sudo systemctl status docker
</code></pre>
<ol start="2">
<li>You should see something similar to the following:</li>
</ol>
<pre><code class="language-bash">● docker.service - Docker Application Container Engine
   Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled)
   Active: active (running) since Sun 2017-06-04 22:38:16 UTC; 4min 10s ago
     Docs: https://docs.docker.com
 Main PID: 32844 (dockerd)
</code></pre>
<ol start="3">
<li>Because the service is running, we can now use the <code>docker</code> command later in this workshop.</li>
</ol>
<h4 id="page_Enable-Docker-Engine-at-Startup">Enable Docker Engine at Startup</h4>
<p>Let's make sure the Docker engine is configured to run on system startup (and reboot).</p>
<ol>
<li>From the command prompt, type:</li>
</ol>
<pre><code class="language-bash">sudo systemctl enable docker
</code></pre>
<ol start="2">
<li>You should see something similar to the following:</li>
</ol>
<pre><code class="language-bash">Synchronizing state of docker.service with SysV init with /lib/systemd/systemd-sysv-install...
Executing /lib/systemd/systemd-sysv-install enable docker
</code></pre>
<h4 id="page_Elevate-Your-Privileges">Elevate Your Privileges</h4>
<p>Be default, running the <code>docker</code> command requires root privileges - that is, you have to prefix the command with <code>sudo</code>. It can also be run by a user in the <strong>docker</strong> group, which is automatically created during the install of Docker.  If you attempt to run the <code>docker</code> command without prefixing it with <code>sudo</code> or without being in the docker group, you'll get an output like the following:</p>
<pre><code class="language-bash">docker: Cannot connect to the Docker daemon. Is the docker daemon running on this host?.
See 'docker run --help'.
</code></pre>
<p>To avoid typing <code>sudo</code> whenever you run the <code>docker</code> command, add your username to the docker group:</p>
<pre><code class="language-bash">sudo usermod -aG docker $(whoami)
</code></pre>
<p>You will then need to log out and back in for the changes to take effect.</p>
<p>If you need to add another user to the <code>docker</code> group (one in which you have not logged in as currently), simply provide that username explicitly in the command:</p>
<pre><code class="language-bash">sudo usermod -aG docker &lt;username&gt;
</code></pre>
<p>You've successfully installed the Docker engine.  You have also configured it to run at startup and have added yourself to the <strong>Docker</strong> group so that you have sufficient privileges for running Docker.</p>
    </div>

            <nav class="hidden-print">
            <ul class="pager">
                                    <li class=pager-prev><a href="../../Courseware/Ubuntu/Install_Updates.html">Previous</a></li>
                                                    <li class=pager-next><a href="../../Courseware/Ubuntu/Install_Node.js.html">Next</a></li>            </ul>
        </nav>
    </article>
        </div>
        <div class="col-md-2 hidden-print">
            <div class="article-links" data-spy="affix" data-offset-top="100">
                <strong>In this article</strong><ol><li><a href="#page_Overview">Overview</a></li><li><a href="#page_Install-Docker">Install Docker</a></li><li><a href="#page_Additional-Configuration">Additional Configuration</a></li></ol>
            </div>
        </div>
    </div>
</div>

    <div id="footer" class="container-fluid hidden-print">
        <div class="row">
            <div class="col-md-2 col-md-offset-1">
            
            </div>
            <div class="col-md-8" style="text-align:right;">
            This work is licensed under a Creative Commons Attribution 4.0 International License.
            </div>
        </div>
    </div>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- JS -->
    
    <script src="../../themes/azure/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script src="../../themes/azure/js/theme.js"></script>

</body>
</html>
